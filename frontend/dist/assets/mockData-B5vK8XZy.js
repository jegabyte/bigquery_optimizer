const c={async optimizeQuery(e){await new Promise(r=>setTimeout(r,2e3));const t=[],i=[];e.toLowerCase().includes("select *")&&(t.push({type:"SELECT_STAR",severity:"high",description:"Using SELECT * can scan unnecessary columns",line:1,impact:"Can increase query cost by 30-50%"}),i.push("Specify only required columns instead of SELECT *")),!e.toLowerCase().includes("where")&&!e.toLowerCase().includes("limit")&&(t.push({type:"NO_FILTER",severity:"high",description:"Query has no WHERE clause or LIMIT",line:1,impact:"Will scan entire table"}),i.push("Add WHERE clause to filter data or use LIMIT")),e.toLowerCase().includes("partition")||(t.push({type:"NO_PARTITION_FILTER",severity:"medium",description:"Query does not filter on partition column",line:1,impact:"May scan unnecessary partitions"}),i.push("Filter on partition column (e.g., _PARTITIONTIME or date column)")),e.toLowerCase().includes("join")&&!e.toLowerCase().includes("on")&&(t.push({type:"CROSS_JOIN",severity:"critical",description:"Potential cross join detected",line:1,impact:"Can result in cartesian product"}),i.push("Ensure all JOINs have proper ON conditions")),e.toLowerCase().includes("order by")&&!e.toLowerCase().includes("limit")&&(t.push({type:"UNBOUNDED_ORDER_BY",severity:"medium",description:"ORDER BY without LIMIT",line:1,impact:"Sorting large result sets is expensive"}),i.push("Add LIMIT when using ORDER BY"));let o=e;e.toLowerCase().includes("select *")&&(o=o.replace(/select\s+\*/gi,"SELECT column1, column2, column3")),!e.toLowerCase().includes("where")&&!e.toLowerCase().includes("limit")&&(o+=`
WHERE date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY)
LIMIT 1000`);const s=Math.random()*10+5,a=s*(.3+Math.random()*.4),n=((s-a)/s*100).toFixed(1);return{originalQuery:e,optimizedQuery:o,issues:t,suggestions:i,validationResult:{originalCost:s.toFixed(2),optimizedCost:a.toFixed(2),costSavings:parseFloat(n),bytesProcessedOriginal:Math.floor(Math.random()*1e9+5e8),bytesProcessedOptimized:Math.floor(Math.random()*5e8+1e8),estimatedRowsOriginal:Math.floor(Math.random()*1e6+1e5),estimatedRowsOptimized:Math.floor(Math.random()*5e5+5e4)},metadata:{optimizationTime:(Math.random()*3+1).toFixed(2),rulesApplied:t.length,optimizationScore:Math.floor(70+Math.random()*30)}}},async getProjects(){return[{id:1,name:"E-commerce Analytics",projectId:"ecommerce-prod"},{id:2,name:"Marketing Dashboard",projectId:"marketing-analytics"},{id:3,name:"Data Warehouse",projectId:"data-warehouse-01"}]},async getQueryHistory(){return[{id:1,query:'SELECT * FROM analytics.user_events WHERE event_date >= "2024-01-01"',executionTime:2.3,rowsProcessed:125e4,bytesProcessed:524288e3,cost:2.56,timestamp:new Date(Date.now()-36e5).toISOString()},{id:2,query:"SELECT user_id, COUNT(*) FROM analytics.transactions GROUP BY user_id",executionTime:1.8,rowsProcessed:45e4,bytesProcessed:2048e5,cost:1.02,timestamp:new Date(Date.now()-72e5).toISOString()},{id:3,query:'SELECT product_id, name, price FROM inventory.products WHERE category = "Electronics"',executionTime:.5,rowsProcessed:12500,bytesProcessed:10485760,cost:.05,timestamp:new Date(Date.now()-108e5).toISOString()}]},async getStorageInsights(){return[{tableName:"user_events",datasetId:"analytics",sizeGB:245.8,partitioned:!0,clustered:!1,lastModified:"2024-01-15",optimization:"Consider clustering on user_id for better performance"},{tableName:"transactions",datasetId:"finance",sizeGB:128.3,partitioned:!0,clustered:!0,lastModified:"2024-01-14",optimization:"Well optimized"},{tableName:"product_catalog",datasetId:"inventory",sizeGB:45.2,partitioned:!1,clustered:!1,lastModified:"2024-01-10",optimization:"Consider partitioning by date for historical data"}]},async getDashboardStats(){return{totalQueries:1248,totalSavings:45.2,avgOptimizationTime:2.3,queryTrend:[{date:"2024-01-10",count:145},{date:"2024-01-11",count:168},{date:"2024-01-12",count:192},{date:"2024-01-13",count:156},{date:"2024-01-14",count:203},{date:"2024-01-15",count:189},{date:"2024-01-16",count:195}],costTrend:[{date:"2024-01-10",cost:12.5},{date:"2024-01-11",cost:15.2},{date:"2024-01-12",cost:18.7},{date:"2024-01-13",cost:14.3},{date:"2024-01-14",cost:20.1},{date:"2024-01-15",cost:17.8},{date:"2024-01-16",cost:19.2}],topIssues:[{type:"SELECT_STAR",count:342},{type:"NO_PARTITION_FILTER",count:287},{type:"NO_FILTER",count:198},{type:"UNBOUNDED_ORDER_BY",count:156},{type:"CROSS_JOIN",count:45}]}}};export{c as mockOptimizationService};
